<div class="navbar navbar-expand-sm navbar-light navbar-lewagon">
  <div class="container-fluid">

    <!-- LOGO à gauche -->
    <div class="navbar-left">
      <%= link_to root_path, class: "navbar-brand" do %>
        <%= image_tag "logo-safemoov.png", class: "navbar-logo", alt: "SafeMoov" %>
      <% end %>
    </div>


  <!-- NAVBAR RIGHT -->
  <div class="navbar-right d-flex align-items-center gap-3">

    <!-- CLOCHE NOTIFICATIONS (toujours visible) -->
    <div class="notifications">
      <% if user_signed_in? %>
        <%= link_to alerts_path do %>
          <i class="fas fa-bell"></i>
          <% if current_user.alerts.any? %>
            <span class="badge"><%= current_user.alerts.count %></span>
          <% end %>
        <% end %>
      <% else %>
        <%= link_to new_user_session_path do %>
          <i class="fas fa-bell"></i>
        <% end %>
      <% end %>
    </div>

    <!-- PROFIL SI CONNECTE / CONNEXION SINON -->
    <% if user_signed_in? %>
      <!-- Menu utilisateur (photo/avatar) -->
      <div class="dropdown profile-menu">
        <a href="#" id="navbarDropdown" data-bs-toggle="dropdown" aria-expanded="false">
          <%#= image_tag(current_user.avatar.attached? ? url_for(current_user.avatar) : "default-avatar-safemoov.png", class: "avatar", alt: "Mon profil") %>
          <%= image_tag("default-avatar-safemoov.png", class: "avatar", alt: "Mon profil") %>
        </a>
        <div class="dropdown-menu dropdown-menu-end" aria-labelledby="navbarDropdown">
          <%#= link_to "Mon profil", user_path(current_user), class: "dropdown-item" %>
          <%#= link_to "Mon profil", user_path(current_user), class: "dropdown-item" %>
          <%= link_to "Déconnexion", destroy_user_session_path, data: { turbo_method: :delete }, class: "dropdown-item" %>
        </div>
      </div>
    <% else %>
      <!-- Lien Connexion -->
      <div class="connexion-link">
        <%= link_to "Connexion", new_user_session_path, class: "nav-link" %>
      </div>
    <% end %>
    </div>
  </div>
</div>
